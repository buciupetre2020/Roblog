{"title":"Distribuția geografică a personalului medical","markdown":{"yaml":{"title":"Distribuția geografică a personalului medical","description":"Cum stăm cu Sănătatea în rural\n","author":[{"name":"Petre Buciu","url":{}}],"knitr":{"opts_chunk":{"fig.align":"center"}},"date":"06-03-2021"},"headingText":"| fig-width: 8","containsRefs":false,"markdown":"\n\nCâți medici avem în țară ? Unde există deficitul ? Vom folosi datele de la INS, mai precis foaia [SAN104B](http://statistici.insse.ro:8077/tempo-online/#/pages/tables/insse-table), pentru a răspunde la aceste întrebări.\n\n```{r}\n#| fig-height: 8\n#| fig-dpi: 200\n\nlibrary(tidyverse)\nlibrary(sf)             #pentru harti si date spatiale\nlibrary(TEMPO)          #pentru a extrage datele de pe INS\nlibrary(gt)\nlibrary(ggthemes)\nlibrary(gtExtras)\nlibrary(hrbrthemes)     \n\n#tema graficelor\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 12,\n                                     axis_text_size = 10,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\n\n#descarcam foile SAN104B de pe INS:\n#TEMPO::tempo_bulk(codes=\"SAN104B\", directory = here::here(\"data/post-4\"))\n\nx <- read_csv(here::here(\"data/post-4/SAN104B.csv\")) %>%\n     set_names(c(\"Categorii\", \"Proprietate\", \"Judete\", \n                 \"Localitati\", \"Ani\", \"Numar\", \"Valoare\")) %>% \n     mutate(Ani = parse_number(Ani)) %>%  \n     mutate(Categorii = gsub(\"din total medici.+\", \n                             \"Medici familie\", Categorii)) %>%\n     select(-Numar) %>% \n     filter(!grepl(\"mixta\", Proprietate), Categorii!=\"Farmacisti\")\n\nharta <- sf::read_sf(here::here(\"data\", \"post-2\", \"ro_uat_poligon.geojson\"))\nharta[grepl(\"Bucure.ti\", harta$name), \"natcode\"] <- rep(\"179132\", 6)\n\n     \nx %>% \n  filter(Localitati==\"TOTAL\", Judete==\"TOTAL\") %>% \n  ggplot(aes(x=Ani, y=Valoare, group=Proprietate)) +\n  geom_line(aes(colour=Proprietate), size=1) +\n  facet_wrap(~Categorii, ncol=2, scales='free') +\n  labs(title = \"Personalul medico-sanitar în România\", x=NULL, y=NULL,\n       caption=\"Sursa: INS, SAN104B\") +\n  scale_y_comma() +\n  scale_color_tableau() +\n  theme(legend.position = \"top\")\n```\n\nObservăm un trend general de creștere pentru personalul sanitar angajat în proprietatea privată pentru toate categoriile. În cazul medicilor de familie, numărul celor angajați în proprietate publică a scăzut accentuat după 2012-2013 ajungând în ultima perioadă la o valoare nesemnificativă. Categoria \"Medici\" trebuie interpretată ca totalul medicilor, incluzând și pe cei de familie. Aceste date pot fi puse și sub forma unui tabel.\n\n```{r}\nx %>% \n  filter(Localitati==\"TOTAL\", Judete==\"TOTAL\") %>% \n  filter(Ani%in%c(2003,2008,2013,2018)) %>% \n  spread(Ani, Valoare) %>% select(-Judete,-Localitati) %>% arrange(desc(Proprietate)) %>%\n  gt::gt(rowname_col = \"Categorii\", groupname_col = \"Proprietate\") %>%\n  gtExtras::gt_theme_538() %>%\n  gt::cols_width(matches(\"[0-9]+\") ~ \"100px\") %>%\n  gt::tab_stubhead(label = \"Categorii\") %>%\n  gt::fmt_number(columns=2:6, sep_mark = \",\", decimals = 0) %>%\n  gt::tab_style(style = cell_text(\"#ad0329\", weight = \"bold\"), \n                locations = cells_row_groups()) %>%\n  gt::tab_style(style=cell_fill(color=\"#daae91\"), \n                locations=cells_row_groups()) %>%\n  gt::tab_style(cell_text(color='black'), \n                locations=cells_column_labels()) %>%\n  gt::tab_options(column_labels.background.color = \"#EEA100\") %>%\n  gt::tab_header(subtitle = \"Sursa: INS, SAN104B\", \n                 title=\"Personal sanitar după forme de proprietate\")\n```\n\nSă vizualizăm aceleași trenduri doar pentru medici însă pe medii de rezidență. Observăm că trendul constant pentru personalul medical angajat în proprietatea publică este de fapt unul divergent la nivel rural-urbal: pe când în municipii numărul lor a crescut ușor, în rural și urbanul mic el a scăzut, dând astfel un număr relativ constant la nivel național. În privința celor angajați în privat, trendul este de creștere pentru toate mediile, mai accentuat, desigur, pentru urbanul mare. Lecția acestui grafic: ne izbește procentul mic de medici și personal sanitar în general în mediul rural, proporția fiind și de 5-10 ori mai mică în rural față de urbanul mare.\n\n```{r}\nx <- x %>% \n  filter(Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n  mutate(natcode = parse_number(Localitati)) %>%\n  mutate(mediu = str_extract(Localitati, \"ORAS|MUNICIPIUL\") %>% \n                 replace_na(\"COMUNA\")) %>% \n  mutate(natcode=as.character(natcode))\n```\n\n```{r}\n#| fig-width: 8\n#| fig-height: 5\n#| fig-dpi: 200\n\nx %>% inner_join(harta) %>%\n  group_by(Categorii, Proprietate, mediu, Ani) %>% \n  summarise(total = 1000*sum(Valoare)/sum(pop2015)) %>% ungroup() %>% \n  filter(Categorii==\"Medici\") %>% \n  ggplot(aes(x=Ani, y=total, group=mediu)) + \n  geom_line(aes(colour=mediu), size=1.2) + \n  facet_wrap(~Proprietate, ncol=2, scales='free') + \n  labs(title = \"Medici la 1000 de locuitori pe medii de rezidență\", \n       x=NULL, y=NULL, colour=\"Mediu\", caption=\"Sursa: INS, SAN104B\") +\n  scale_y_percent(suffix=\"‰\", scale = 1) +\n  scale_color_tableau() +\n  theme(legend.position = \"top\")\n```\n\nSă repetăm același lucru și pentru medicii de familie și personalul sanitar mediu.\n\n```{r}\n#| fig-width: 8\n#| fig-height: 5\n#| fig-dpi: 200\n\nx %>% inner_join(harta) %>%\n  group_by(Categorii, Proprietate, mediu, Ani) %>% \n  summarise(total = 1000*sum(Valoare)/sum(pop2015)) %>% ungroup() %>% \n  filter(Categorii==\"Medici familie\") %>% \n  ggplot(aes(x=Ani, y=total, group=mediu)) + \n  geom_line(aes(colour=mediu), size=1.2) + \n  facet_wrap(~Proprietate, ncol=2, scales='free') + \n  labs(title = \"Medici de familie pe medii de rezidență\", \n       x=NULL, y=NULL, colour=\"Mediu\", caption=\"Sursa: INS, SAN104B\") +\n  scale_y_continuous(labels= function(x) paste(x, \"‰\"))+\n  theme(legend.position=\"top\") +\n  scale_color_tableau() \n```\n\n```{r}\n#| fig-width: 8\n#| fig-height: 5\n#| fig-dpi: 200\n\nx %>% inner_join(harta) %>%\n  group_by(Categorii, Proprietate, mediu, Ani) %>% \n  summarise(total = 1000*sum(Valoare)/sum(pop2015)) %>% ungroup() %>% \n  filter(grepl(\"Personal\", Categorii)) %>% \n  ggplot(aes(x=Ani, y=total, group=mediu)) + \n  geom_line(aes(colour=mediu), size=1.2) + \n  facet_wrap(~Proprietate, ncol=2, scales=\"free\") + \n  labs(title = \"Personal sanitar mediu pe medii de rezidență\", \n       x=NULL, y=NULL, colour=\"Mediu\", caption='Sursa: INS, SAN104B') +\n  scale_y_percent(suffix=\"‰\", scale=1) +\n  theme(legend.position=\"top\") +\n  scale_color_tableau()\n```\n\nÎn aceste două cazuri lucrurile stau simplu: trendurile sunt aceleași ca la nivel național.\n\n```{r}\n#| fig-width: 8\n#| fig-height: 6\n#| fig-dpi: 200\n\nx %>% \n  filter(Ani==2019, Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n  group_by(Categorii, Localitati, natcode) %>% \n  summarise(total = sum(Valoare)) %>% \n  ungroup() %>% filter(Categorii==\"Medici\") %>% \n  inner_join(harta) %>% st_as_sf() %>% mutate(total = 1000*total/pop2015) %>%\n  mutate(total = cut_number(total, n=10)) %>%\n  ggplot() + geom_sf(aes(fill=total), size=0.1) + \n  labs(title = \"Număr total medici la 1000 de locuitori\", fill=\"Total\") +\n  guides(guide_colorbar(height=unit(10, \"cm\"))) +\n  theme(plot.title = element_text(size=12), \n        axis.text.x = element_text(size=6), \n        axis.text.y = element_text(size=6),\n        legend.key.height = unit(0.4, \"cm\"),\n        legend.key.width = unit(0.4, \"cm\"),\n        legend.text = element_text(size=6)) +\n  scale_fill_tableau(palette=\"Classic Orange-Blue\", \n                     type='ordered-diverging')\n```\n\nVedem 288 de localități fără niciun medic, public sau privat. Să le ordonăm după mărimea populației în următorul tabel.\n\n```{r}\nx %>% \n    filter(Ani==2019, Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n    group_by(Categorii, Localitati, natcode) %>% \n    summarise(total = sum(Valoare)) %>% \n    ungroup() %>% filter(Categorii==\"Medici\") %>% \n    right_join(harta) %>% filter(is.na(total)) %>% \n    arrange(desc(pop2015)) %>% .[-c(1:6),] %>% select(name, county, pop2015) %>%\n    rename(Populatie = pop2015, Localitate=name, Judet=county) %>%\n    rmarkdown::paged_table()\n```\n\nȘi numărul de localități fără niciun medic după județe:\n\n```{r}\n#| fig-width: 6\n#| fig-height: 6\n#| fig-dpi: 200\n\nx %>% \n    filter(Ani==2019, Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n    group_by(Categorii, Localitati, natcode) %>% \n    summarise(total = sum(Valoare)) %>% \n    ungroup() %>% filter(Categorii==\"Medici\") %>% \n    right_join(harta) %>% filter(is.na(total)) %>% \n    arrange(desc(pop2015)) %>% .[-c(1:6),] %>% \n    select(name, county, pop2015) %>% count(county, sort=T) %>% \n    mutate(county=fct_reorder(county, n)) %>% slice(1:15) %>% \n    ggplot(aes(x=county, y=n)) + \n    geom_col(fill=\"#EEA100\") + coord_flip() + \n    labs(title = \"Numărul de localități fără niciun medic\", x=NULL, y=NULL, \n         caption='Sursa: INS, SAN104B')\n```\n\nVedem că cele mai multe sunt în Hunedoara, Buzău, Vaslui.\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"toc-depth":3,"output-file":"distribuia-geografic-a-personalului-medical.html"},"language":{"code-summary":"Arată codul"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"0.9.481","editor":"visual","theme":"spacelab","title-block-banner":true,"page-layout":"article","comments":{"utterances":{"repo":"buciupetre2020/blogComments"}},"title":"Distribuția geografică a personalului medical","description":"Cum stăm cu Sănătatea în rural\n","author":[{"name":"Petre Buciu","url":{}}],"knitr":{"opts_chunk":{"fig.align":"center"}},"date":"06-03-2021"},"extensions":{"book":{"multiFile":true}}}}}