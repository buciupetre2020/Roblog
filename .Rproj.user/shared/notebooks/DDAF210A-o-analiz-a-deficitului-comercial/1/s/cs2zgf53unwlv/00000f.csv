"0","#| fig-width: 10"
"0","#| fig-height: 8"
"0","#| fig-dpi: 200"
"0",""
"0","#deficite cu partenerii"
"0","deficite_network <- tec %>%"
"0","            filter(grepl(""Total - all NACE"", nace_r2), "
"0","                   grepl(""2020"", time)) %>%"
"0","            spread(stk_flow, values) %>%"
"0","            mutate(deficit = Exports - Imports) %>%"
"0","            select(geo, partner, deficit) %>%"
"0","            rename(from = geo,"
"0","                   to = partner) %>%"
"0","            mutate(from = gsub(""Germany.*"", ""Germany"", from),"
"0","                   to = gsub(""Germany.*"", ""Germany"", to)) %>%"
"0","            filter(!from%in%c(""Cyprus"", ""Luxembourg"", ""Malta"", ""Ireland"")) %>%"
"0","            filter(to%in%from)"
"0",""
"0","deficite_prel <- deficite_network %>%"
"0","                group_by(from) %>%"
"0","                     arrange(((deficit))) %>%"
"0","                     filter(row_number() <=5) %>%"
"0","                     ungroup() %>%"
"0","                as_tbl_graph()            "
"0","  "
"0","deficite_net_plot <- deficite_prel %>% "
"0","                  activate(nodes) %>%"
"0","                  mutate(centralitatea = as.factor(round(centrality_eigen(),1))) %>%"
"0","                  ggraph(layout=""kk"") + "
"0","                  geom_edge_fan(aes(edge_alpha=abs(deficit)), "
"0","                                arrow = arrow(length = unit(3, 'mm')), "
"0","                  start_cap = circle(6, 'mm'),"
"0","                  end_cap = circle(6, 'mm'), show.legend=FALSE) + "
"0","                  geom_node_point(aes(colour=centralitatea), size=14, show.legend = F) + "
"0","                  scale_color_tableau() +"
"0","                  geom_node_text(aes(label = name), size=2.8) + "
"0","                  theme_graph() +"
"0","                  theme(legend.key.size=unit(0.4, ""cm""))"
"0","deficite_net_plot"
