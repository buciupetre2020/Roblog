{
  "hash": "577ae8b14e24b702a9007dcbf206b6c9",
  "result": {
    "markdown": "---\ntitle: \"Tiparele geografice ale mortalităţii infantile\"\ndescription: |\n  În Europa\nauthor:\n  - name: Petre Buciu\n    url: {}\nknitr: \n  opts_chunk:\n    fig.align: center\ndate: 06-17-2023\nimage: preview.png\nnumber-sections: true\ncategories:\n  - \"demografie\"\n  - \"sociale\"\n---\n\n\n## Analiza exploratorie\n\nÎn acest articol vom analiza rata mortalităţii infantile conform Eurostat, la nivel NUTS 2 (regiuni de dezvoltare). Vom folosi fişierul de la ei numit `demo_r_minfind` care conţine date până în anul 2021 inclusiv. Vom face media la nivelul anilor 2017-2021 pentru a vizualiza mortalitatea infantilă la nivelul continentului.\n\n\n::: {.cell layout-align=\"center\" fig.dpi='200'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(hrbrthemes)\nlibrary(ggthemes)\nlibrary(lme4)\nlibrary(sf)\nlibrary(eurostat)\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 14,\n                                     axis_text_size = 12,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\ndf <- get_eurostat(id=\"demo_r_minfind\") %>% \n      label_eurostat(fix_duplicated = TRUE, code = \"geo\")\nharta <- eurostat::eurostat_geodata_60_2016 %>% as_tibble() %>% \n         rename(geo_code=geo)\n\ndf %>% filter(time > \"2016-01-01\") %>% \n  group_by(geo_code, geo) %>% \n  summarise(values=mean(values, na.rm=TRUE)) %>% \n  ungroup() %>% inner_join(harta) %>% \n  group_by(CNTR_CODE) %>% slice_max(order_by = LEVL_CODE, n = 1) %>% \n  ungroup() %>% mutate(values=cut_number(values, n=10)) %>% \n  st_as_sf() %>% ggplot() + \n  geom_sf(aes(fill=values), colour=NA) + \n  scale_fill_tableau(palette = \"Classic Orange-Blue\", \n                     type=\"ordered-diverging\", direction = -1) + \n  geom_sf(data=harta %>% filter(LEVL_CODE==0) %>% st_as_sf() %>% \n            st_cast(., \"MULTILINESTRING\"), colour='black') +\n  scale_x_continuous(limits = c(-10, 30)) + \n  scale_y_continuous(limits=c(34, 70)) +\n  labs(caption=\"Sursa: Eurostat, demo_r_minfind\", fill=\"NUTS 2\")\n```\n\n::: {.cell-output-display}\n![Rata mortalităţii infantile la nivel NUTS 2](tiparele-mortalitatii-infantile_files/figure-html/fig-europa-1.png){#fig-europa fig-align='center' width=960}\n:::\n:::\n\n\nVedem că marea majoritate a României se încadrează în intervalul 7.03-14 %, adică decila a 9-a (penultima). Suntem aşadar până în top 20 % la mortalitatea infantilă ca ţară, având şi o zonă în top 10 %. Este interesant şi greu de explicat tiparul din Germania. Să vedem trendurile în decursul anilor.\n\n\n::: {.cell layout-align=\"center\" fig.dpi='200'}\n\n```{.r .cell-code}\ndf %>% filter(grepl(\"^[A-Z]{2}$\", geo_code)) %>% \n  ggplot(aes(x=time, y=values, group=geo)) + \n  geom_line(aes(colour=geo)) + \n  gghighlight::gghighlight(grepl(\"Romania|Bulgaria|Poland|Czechia|Finland\",\n                                 geo), use_direct_label = F) +\n  scale_colour_tableau() + \n  labs(title=\"Trendurile mortalităţii infantile\", \n       caption = \"Sursa: Eurostat, demo_r_minfind\", x=NULL, \n       y=NULL, colour=\"Ţară\") +\n  scale_y_percent(scale=1)\n```\n\n::: {.cell-output-display}\n![Trendurile mortalităţii infantile](tiparele-mortalitatii-infantile_files/figure-html/fig-trenduri-1.png){#fig-trenduri fig-align='center' width=960}\n:::\n:::\n\n\n## Analiză statistică\n\nToate ţările au făcut progrese uimitoare în aceşti 30 de ani, iar noi am prins din urmă Bulgaria. Dar încă avem rate duble faţă de media UE. Mai observăm că trendurile sunt exponenţial-descrescătoare. Aplicând un model liniar mixt descoperim un fenomen de convergenţă. Acest model aplică fiecărei ţări câte o pantă şi un intercept diferite, având grijă să fie într-o oarecare măsură centrate în jurul mediilor globale. Corelaţia dintre pante şi intercepturi este, conform modelului, -0.69. Acest lucru înseamnă că ţările cu intercepturi mari au pante şi mai abrupt-negative (mici), ceea ce ne duce cu gândul la fenomenul de convergenţă: cele care pornesc de sus le vor ajunge din urmă pe celelalte.\n\n\n::: {.cell layout-align=\"center\" fig.dpi='200'}\n\n```{.r .cell-code}\nmodel <- df %>% filter(grepl(\"^[A-Z]{2}$\", geo_code)) %>% \n  drop_na() %>% select(-unit, -geo_code) %>% \n  filter(!grepl(\"Lie\", geo)) %>% \n  mutate(time=lubridate::year(time)-1990) %>% \n  lme4::lmer(log10(values) ~ time + (1+time|geo), data=.) \n\ndf %>% filter(grepl(\"^[A-Z]{2}$\", geo_code)) %>% \n    drop_na() %>% select(-unit, -geo_code) %>% \n    filter(!grepl(\"Lie\", geo)) %>% \n    mutate(time=lubridate::year(time)-1990) %>% \n    mutate(fit = 10^(predict(model))) %>% \n    ggplot(aes(x=time, y=fit, group=geo)) + \n    geom_line(aes(colour=geo), size=0.8) + \n    gghighlight::gghighlight(grepl(\"Romania|Bulgaria|Czechia|Poland\", geo),\n                             use_direct_label = F) + \n    scale_color_tableau() + labs(colour=\"Ţară\",x=NULL, y=NULL,\n                                 caption=\"Sursa: calcule proprii\") +\n    scale_y_percent(scale=1)\n```\n\n::: {.cell-output-display}\n![Trendurile prezise ale mortalităţii infantile](tiparele-mortalitatii-infantile_files/figure-html/fig-model-1.png){#fig-model fig-align='center' width=960}\n:::\n:::\n",
    "supporting": [
      "tiparele-mortalitatii-infantile_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}