[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Analize socio-economice cu R",
    "section": "",
    "text": "Posturi\n\n\n\nSubscribe\n\n\nVă place acest blog ? Primiți notificări aici:\n\n      \n\n\n\n\n\n\n\n\n\n\n   \n     \n     \n       Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\nCare este structura deficitului comercial al României ?\n\n\n\n\n\nO analiză a deficitului comercial\n\n\n\n\n\n\nJun 7, 2023\n\n\nPetre Buciu\n\n\n\n\n\n\n\n\nGeografia excesului de mortalitate\n\n\n\n\n\nÎn ce regiuni a lovit pandemia cel mai tare ?\n\n\n\n\n\n\nJun 7, 2023\n\n\nPetre Buciu\n\n\n\n\n\n\n\n\nInegalitatea României în context european\n\n\n\n\n\nPentru prima dată în ţara noastră\n\n\n\n\n\n\nMay 28, 2023\n\n\nPetre Buciu\n\n\n\n\n\n\n\n\nDinamica datoriei publice în Europa\n\n\n\n\n\nÎn toate țările a crescut datoria publică, iar România în rând cu media.\n\n\n\n\n\n\nJun 3, 2021\n\n\nPetre Buciu\n\n\n\n\n\n\n\n\nDistribuția geografică a personalului medical\n\n\n\n\n\nCum stăm cu Sănătatea în rural\n\n\n\n\n\n\nJun 3, 2021\n\n\nPetre Buciu\n\n\n\n\n\n\n\n\nCum și cât s-a construit în România în ultimii 30 de ani ?\n\n\n\n\n\nO analiză pe datele de la INS\n\n\n\n\n\n\nJun 2, 2021\n\n\nPetre Buciu\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2023-05-28-inegalitea-romniei-n-context-european/inegalitea-romniei-n-context-european.html",
    "href": "posts/2023-05-28-inegalitea-romniei-n-context-european/inegalitea-romniei-n-context-european.html",
    "title": "Inegalitatea României în context european",
    "section": "",
    "text": "Cum a evoluat inegalitatea la noi\nUn nou set de date oferit de World Inequality Database ne permite să urmărim în timp şi spaţiu procentele de venit naţional care revine diferitelor percentile atât pre-taxare cât şi post-taxare. Datele au fost create conform metodologiei DINA (Distributional National Accounts).\n\n\nArată codul\nlibrary(tidyverse)\n\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 12,\n                                     axis_text_size = 10,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\n\ntari <- read_delim(here::here(\"/home/petre/R/proiecte/taxare/Carte/database\", \"WID\", \"WID_countries.csv\"), \n                  delim=\";\") %>% drop_na() %>% filter(region==\"Europe\") %>%\n        inner_join(read_csv(here::here(\"/home/petre/R/proiecte/taxare/Carte/database\", \"dictionar_tari.csv\")) %>%\n                   rename(shortname=geo)) %>% select(-shortname) %>% \n        rename(geo=tari) %>% select(-region) %>% rename(region=region2)\n\nmetadata <- read_delim(here::here(\"/home/petre/R/proiecte/taxare/Carte/database\", \"WID\", \n                                  \"WID_metadata_RO.csv\")) %>%\n            select(variable, shortname, shorttype)\n\ndf <- here::here(\"/home/petre/R/proiecte/taxare/Carte/database\", \"WID\", \n                 paste0(\"WID_data_\", tari$alpha2, \".csv\")) %>%\n      map_dfr(., ~ read_delim(.x, delim=';') %>% \n               rename(alpha2=country) %>% \n               inner_join(tari %>% select(-titlename)) %>% \n               mutate(age=as.character(age)) %>% \n               rename(country=alpha2)) %>%\n               filter(year>1989)\n\n\nProcentul din venitul naţional înaintea taxelor care revine diferitelor categorii de distribuţie este afişat în graficul următor:\n\n\nArată codul\ndf %>% filter(grepl(\"sdiincj992|sptincj992\", variable)) %>% \n  spread(variable, value) %>% \n  filter(percentile%in%c(\"p0p20\", \"p0p50\", \"p90p100\", \"p99p100\")) %>% \n  ggplot(aes(x=year, y=sptincj992, group=geo)) + \n  geom_line(aes(colour=geo), size=1) + \n  facet_wrap(~percentile, ncol=2, scales='free') + \n  gghighlight::gghighlight(geo%in%c(\"Romania\", \"Bulgaria\", \n                                    \"Polonia\", \"Ungaria\"),\n                           calculate_per_facet = T, use_direct_label = F) +\n  theme(legend.position = \"top\") + \n  labs(title=\"Distribuţia venitului naţional înaintea taxelor\", \n       subtitle=\"După distribuţie\", colour='Ţară', y=NULL, x=\"Anul\") +\n  scale_y_continuous(labels=scales::percent_format()) +\n  ggthemes::scale_color_tableau()\n\n\n\n\n\nŞi post-taxe:\n\n\nArată codul\ndf %>% filter(grepl(\"sdiincj992|sptincj992\", variable)) %>%\nspread(variable, value) %>% filter(geo!=\"Cipru\") %>%\nfilter(percentile%in%c(\"p0p10\", \"p0p50\", \"p90p100\", \"p99p100\")) %>%\nggplot(aes(x=year, y=sdiincj992, group=geo)) +\ngeom_line(aes(colour=geo), size=1) +\nfacet_wrap(~percentile, ncol=2, scales='free') +\ngghighlight::gghighlight(geo%in%c(\"Romania\", \"Bulgaria\",\n                                  \"Polonia\", \"Ungaria\"),\n                         calculate_per_facet = T, use_direct_label = F) +\ntheme(legend.position = \"top\") +\nlabs(title=\"Distribuţia veniturilor naţionale după taxare\",\n     subtitle=\"După distribuţie\", colour='Ţară', y=NULL, x=\"Anul\") +\nscale_y_continuous(labels=scales::percent_format()) +\nggthemes::scale_color_tableau()\n\n\n\n\n\nRomânia, dar şi alte ţări din Europa de Est stau destul de rău la capitolul inegalitate, fiind în top atât înainte cât şi după taxe. În cazul României venitul revenit celor mai bogaţi 1 % din societate e totuşi mai scăzut după taxare, dar la categoria top 10 % situaţia e tot acută comparativ cu restul ţărilor europene. Probabil că avem o disproporţie din cadrul celor top 1 % care trăiesc din salarii versus capital, mai puţin taxat.\nVom calcula raportul dintre procentele de venit naţional care revin celor top 10 % şi ultimilor 50 % atât pentru venitul pre-taxe cât şi pentru venitul post-taxe. Cele două rapoarte vor fi pe axele x, respectiv y în graficul următor. Urmărim aceşti doi indicatori pentru media perioadei 2012-2021 (ultimii zece ani).\n\n\nArată codul\nratios <- df %>% \n    filter(grepl(\"adiincj992|aptincj992\", variable)) %>% \n    filter(year>1989, age==\"992\") %>% select(-age, -pop) %>%\n    spread(variable, value) %>% \n    filter(percentile%in%c(\"p0p50\", \"p90p100\")) %>% \n    pivot_wider(names_from=percentile, \n                values_from = c(adiincj992, aptincj992)) %>% \n    mutate(ratio_pre = aptincj992_p90p100/aptincj992_p0p50, \n           ratio_post = adiincj992_p90p100/adiincj992_p0p50) %>% \n    filter(year>2011) %>%\n    group_by(geo, region) %>% \n    summarise(ratio_pre = mean(ratio_pre), \n              ratio_post=mean(ratio_post)) %>% ungroup() \n\nratios %>% filter(!geo%in%\"Lituania\") %>% \n  ggplot(aes(x=ratio_pre, y=ratio_post)) + \n  geom_point(colour='red3') + \n  ggrepel::geom_text_repel(aes(label=geo)) + \n  labs(title=\"Raportul veniturilor pentru top 10% vs bottom 50%\", \n       subtitle=\"Media 2012-2021\", x=\"Pre-taxe\", y=\"Post-taxe\") + \n  geom_smooth(method='lm', linetype=2, fill=\"#EEA100\") \n\n\n\n\n\nObservăm că România are cel mai mare raport atât pre cât şi post taxare. Acest lucru sugerează că sistemul fiscal nu redistribuie suficient către cei din decilele inferioare ale distribuţiei. Acest lucru se întâmplă în ţara cu cea mai mare inegalitate din Europa dacă excludem Serbia (nu apare în imagine). Merită să calculăm şi procentele cu care sistemul fiscal reduce inegalitatea pre-taxe pentru fiecare ţară, media pe ultimii zece ani.\n\n\nArată codul\ndf %>% \n    filter(grepl(\"adiincj992|aptincj992\", variable)) %>% \n    filter(year > 2011, age==\"992\") %>% select(-age, -pop) %>%\n    spread(variable, value) %>% \n    group_by(country, percentile, region, geo) %>%\n    summarise(across(adiincj992:aptincj992, mean)) %>%\n    ungroup() %>%\n    filter(percentile%in%c(\"p0p50\", \"p90p100\")) %>% \n    pivot_wider(names_from=percentile, \n                values_from = c(adiincj992, aptincj992)) %>% \n    mutate(ratio_pre = aptincj992_p90p100/aptincj992_p0p50, \n           ratio_post = adiincj992_p90p100/adiincj992_p0p50) %>% \n    mutate(delta = 100*(ratio_pre - ratio_post)/ratio_pre) %>% \n    select(geo, region, delta) %>% \n    filter(!grepl(\"Cipru|Lituania\",geo)) %>% \n    mutate(geo=fct_reorder(geo, delta)) %>% \n    ggplot(aes(x=geo, y=delta)) + geom_col(fill=\"#EEA100\") + \n    theme(axis.text.x = element_text(angle=90, size=12)) +\n    labs(title=\"Reducerea inegalităţii pre-taxe de sistemul fiscal\", \n         x=\"Ţară\", subtitle=\"Media 2012 - 2021\", y=\"Procent (%)\", colour=\"Ţară\") +\n    scale_y_continuous(labels=scales::percent_format(scale=1)) \n\n\n\n\n\nObservăm că România se află printre ţările cu cele mai mici raporturi ale reducerii inegalităţii pre-taxe prin taxare. Combinaţia de inegalitate mare pre-taxare combinată cu redistribuţia scăzută duce la situaţia actuală. Procentele mici pentru Spania şi Italia nu trebuie să ne mire, întrucât aceste state cheltuiesc mult cu pensiile (populaţii îmbătrânite), lucru care uniformizează inegalitatea pre-taxe într-o oarecare măsură (inegalitatea pre-taxe este calculată conform autorilor ca venitul naţional revenit factorilor de producţie minus contribuţiile pentru pensii şi asigurări sociale plus distribuţiile pentru ele). Ele au oricum o inegalitate pre-taxe mai redusă în primul rând.\n\n\nMuncă sau capital ?\nMai este ceva interesant de văzut, dar folosim un alt (nou) set de date, de data aceasta de la Banca Mondială: taxarea efectivă a capitalului versus muncii. Practic cât la sută din venitul din cele două surse este plătit sub formă de taxe.\n\n\nArată codul\nread_csv(\"https://raw.githubusercontent.com/pierrebachas/Globalization_Factor_Taxation/main/globalETR_bfjz.csv\") %>% \n  select(country_name, year, region, ETR_L, ETR_K) %>% \n  filter(country_name%in%c(\"Romania\", \"Hungary\", \"Bulgaria\", \"Poland\", \"France\", \"Denmark\")) %>% \n  gather(ETR_L:ETR_K, key=\"tax_rate\", value='valoare') %>% \n  mutate(country_name=gsub(\"Poland\", \"Polonia\", country_name) %>% \n                      gsub(\"Hungary\", \"Ungaria\", .) %>% \n                      gsub(\"Denmark\", \"Danemarca\", .) %>%\n                      gsub(\"France\", \"Franţa\", .)) %>%\n  mutate(tax_rate = gsub(\"ETR_K\", \"Capital\", tax_rate) %>% \n                    gsub(\"ETR_L\", \"Muncă\", .)) %>% \n  ggplot(aes(x=year, y=valoare, group=tax_rate)) + \n  geom_line(aes(colour=tax_rate), size=1) + \n  facet_wrap(~country_name, ncol=2, scales='free') +\n  scale_y_continuous(labels=scales::percent_format(scale=100)) +\n  labs(title = \"Rata de taxare efectivă capital-muncă\", \n       subtitle=\"Sursa: Banca Mondială\",\n       x=\"Anul\", y=NULL, colour=\"Indicator\") +\n  theme(legend.position = \"top\") +\n  ggthemes::scale_color_tableau()\n\n\n\n\n\nObservăm că Franţa şi Danemarca taxează mai mult capitalul decât munca. Şi nu o duc rău deloc."
  },
  {
    "objectID": "posts/2021-06-03-dinamica-datoriei-publice-n-europa/dinamica-datoriei-publice-n-europa.html",
    "href": "posts/2021-06-03-dinamica-datoriei-publice-n-europa/dinamica-datoriei-publice-n-europa.html",
    "title": "Dinamica datoriei publice în Europa",
    "section": "",
    "text": "Arată codul\nlibrary(tidyverse)\nlibrary(hrbrthemes)\nlibrary(eurostat)\nlibrary(gt)\nlibrary(ggthemes)\n\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Frutiger Bold\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 10,\n                                     axis_text_size = 8,\n                                     base_family = \"Frutiger\",\n                                     plot_title_family = \"Frutiger Bold\",\n                                     subtitle_family = \"Frutiger\",\n                                     caption_family = \"Frutiger\", \n                                     caption_size = 8,\n                                     plot_title_size = 14,\n                                     subtitle_size = 10) +\n  theme(legend.text = element_text(size=8), \n        legend.title = element_text(size=10),\n        legend.key.size = unit(0.5, \"cm\")))\n\n\n\n\nArată codul\nx <- get_eurostat(id=\"teina230\") %>% \n     label_eurostat() %>% select(-1,-2) %>% \n     filter(grepl(\"Percentage.+\", unit)) %>% select(-1) %>%\n     mutate(geo = gsub(\"\\\\(.+\\\\)|\\\\-.+$\", \"\", geo) %>% trimws())\n\nx %>% \n  ggplot(aes(x=time, y=values, group=geo)) + \n  geom_line(aes(colour=geo), size=1.2) + \n  gghighlight::gghighlight(grepl(\"Romania|European\", geo), \n                           use_direct_label = F) +\n  theme(legend.position = \"top\") + \n  labs(title = \"Datoria publică în Europa\", x=NULL, y=NULL, \n       colour=\"Regiune\", caption=\"Sursa: Eurostat, teina230\") + \n  scale_y_percent(scale=1) +\n  scale_colour_tableau()\n\n\n\n\n\n\n\n\n\nSă punem rezultatele și sub forma unui tabel. Delta măsoară diferența dintre procentele lunii octombrie (ultimul punct pentru care avem datele) 2021 față de aceeași lună a anului 2020. Avem astfel acoperită mare parte din perioada pandemiei și a măsurilor fiscale care au fost luate cu ocazia ei.\n\n\nArată codul\nx %>% filter(grepl(\"-10-\", time)) %>% \n  spread(time, values) %>% \n  mutate(Delta = `2021-10-01`-`2020-10-01`) %>% \n  arrange(desc(Delta)) %>% select(-4) %>%\n  gt::gt() %>% gtExtras::gt_theme_538() %>%\n  tab_header(title = \"Datoria publică în Europa\", \n             subtitle=\"Sursa: Eurostat, teina230\") %>%\n  tab_style(cell_fill(color=\"#EEA100\"), cells_column_labels()) %>%\n  gtExtras::gt_highlight_rows(rows=c(5, 13))\n\n\n\n\n\n\n  \n    \n      Datoria publică în Europa\n    \n    \n      Sursa: Eurostat, teina230\n    \n    \n      geo\n      2020-10-01\n      2021-10-01\n      Delta\n    \n  \n  \n    Czechia\n37.7\n42.0\n4.3\n    Slovakia\n58.9\n62.2\n3.3\n    Malta\n52.9\n55.1\n2.2\n    Latvia\n42.0\n43.7\n1.7\n    Romania\n46.9\n48.6\n1.7\n    Germany\n68.7\n69.3\n0.6\n    Luxembourg\n24.5\n24.5\n0.0\n    Bulgaria\n24.5\n23.9\n-0.6\n    Austria\n82.9\n82.3\n-0.6\n    Estonia\n18.5\n17.6\n-0.9\n    Euro area – 20 countries\n97.2\n95.5\n-1.7\n    Euro area\n97.3\n95.5\n-1.8\n    European Union\n90.0\n88.0\n-2.0\n    France\n115.0\n112.9\n-2.1\n    Finland\n74.7\n72.6\n-2.1\n    Spain\n120.4\n118.3\n-2.1\n    Netherlands\n54.7\n52.5\n-2.2\n    Lithuania\n46.3\n43.7\n-2.6\n    Hungary\n79.3\n76.6\n-2.7\n    Norway\n45.2\n42.5\n-2.7\n    Belgium\n112.0\n109.1\n-2.9\n    Ireland\n58.4\n55.4\n-3.0\n    Sweden\n39.8\n36.5\n-3.3\n    Poland\n57.2\n53.6\n-3.6\n    Italy\n154.9\n149.9\n-5.0\n    Slovenia\n79.6\n74.5\n-5.1\n    Denmark\n42.2\n36.7\n-5.5\n    Croatia\n87.0\n78.4\n-8.6\n    Portugal\n134.9\n125.4\n-9.5\n    Greece\n206.3\n194.6\n-11.7\n    Cyprus\n113.8\n101.2\n-12.6\n  \n  \n  \n\n\n\n\nRomânia ocupă locul al cincilea în acest tabel, din treizeci de țări disponibile. Se poate spune că creșterea ei, de doar 1.7 puncte procentuale, iese în evidență în peisaj european.\n\n\nArată codul\nx %>% \n  filter(grepl(\"2021-10-|2020-10-\", time)) %>% \n  spread(time, values) %>% \n  mutate(delta = `2021-10-01`-`2020-10-01`) %>% \n  mutate(geo = fct_reorder(geo, delta)) %>% \n  ggplot(aes(x=geo, y=`2020-10-01`)) + \n  geom_point() + coord_flip() + \n  geom_point(aes(x=geo, y=`2021-10-01`), colour=\"red2\") + \n  geom_segment(aes(x=geo, xend=geo, y=`2020-10-01`, yend=`2021-10-01`), \n               colour=\"grey50\", arrow = arrow(angle=30, length = unit(2, \"mm\"))) +\n  labs(title = \"Datoria publică ca procent din PIB\", x=NULL, y=NULL, colour=\"Țară\")\n\n\n\n\n\n\n\n\n\nGraficul confirmă și vizual același lucru, dar mai greu de citit întrucât diferenţele sunt mici. Nu mai punem la socoteală că România a intrat în această perioadă și cu un deficit bugetar semnificativ."
  },
  {
    "objectID": "posts/2021-06-06-o-analiz-a-deficitului-comercial/o-analiz-a-deficitului-comercial.html",
    "href": "posts/2021-06-06-o-analiz-a-deficitului-comercial/o-analiz-a-deficitului-comercial.html",
    "title": "Care este structura deficitului comercial al României ?",
    "section": "",
    "text": "În acest post vom ilustra imaginea de ansamblu a deficitului comercial cu bunuri al României. Vom vedea ce exportăm, ce importăm, cu ce țări avem deficit, ce fel de firme se implică în acest proces, etc. Pentru început vom explora datele de la INS, foile EXP101F și EXP102F (exporturi FOB și importuri CIF) după grupele de mărfuri conform Nomenclatorului Combinat (NC). Acest lucru ne permite un grad superior de granularitate a analizei, întrucât datele sunt colectate la nivelul a peste 1000 de categorii de mărfuri. Să începem cu explorarea indicatorilor generali. Pentru început, trendurile exporturilor și importurilor totale, în valori absolute și procente din PIB.\n\n\nArată codul\nlibrary(tidyverse)\nlibrary(TEMPO)\nlibrary(eurostat)\nlibrary(ggraph)\nlibrary(tidygraph)\nlibrary(eurostat)\nlibrary(ggthemes)\n\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 12,\n                                     axis_text_size = 10,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\n\n#Descărcăm fișierele\n#tempo_bulk(codes=\"EXP101F\", directory = here::here(\"data/post-6\"))\n#tempo_bulk(codes=\"EXP102F\", directory=here::here(\"data/post-6\"))\n#tempo_bulk(codes=\"EXP101B\", directory = here::here(\"data/post-6\"))\n#tempo_bulk(codes=\"EXP102E\", directory=here::here(\"data/post-6\"))\n\n\n\n\nArată codul\nexp <- read_csv(here::here(\"data/post-6/EXP101F.csv\")) %>% \n       set_names(c(\"grupe\", \"ani\", \"valuta\", \"valoare\")) %>% \n       filter(grepl(\"EURO\", valuta)) %>% select(-valuta) %>%\n       mutate(ani = parse_number(ani)) %>% filter(ani>1994) %>%\n       rename(export=valoare)\n\nimp <- read_csv(here::here(\"data/post-6/EXP102F.csv\")) %>%\n       set_names(c(\"grupe\", \"ani\", \"valuta\", \"valoare\")) %>%\n       filter(grepl(\"EURO\", valuta)) %>% select(-valuta) %>%\n       mutate(ani = parse_number(ani)) %>% filter(ani>1994) %>%\n       rename(import=valoare)\n\npib <- get_eurostat(id=\"nama_10_gdp\") %>% label_eurostat() %>%\n       filter(grepl(\"Current prices.+euro\", unit), \n              grepl(\"domestic product at\", na_item), geo==\"Romania\") %>%\n       select(time, values) %>% rename(ani=time, PIB=values) %>%\n       mutate(ani = lubridate::year(ani)) %>%\n       mutate(PIB = PIB*1000)\ntabel <- inner_join(imp, exp) %>% inner_join(pib)\n\n\n\n\nArată codul\ntabel %>% \n  filter(grupe==\"Total\") %>% \n  select(-grupe, -PIB) %>% \n  gather(import:export, key=\"Indicator\", value=\"Valoare\") %>% \n  mutate(Valoare=Valoare/1000000) %>%\n  ggplot(aes(x=ani, y=Valoare, group=Indicator)) + \n  geom_line(aes(colour=Indicator), size=1.2) + \n  scale_color_discrete(direction=-1) +\n  labs(title = \"Valoarea importurilor/exporturilor\", x=NULL, \n       y=\"Miliarde EURO\", \n       caption=\"Sursa: Eurostat nama_10_gdp, INS EXP101F/102F\") +\n  hrbrthemes::scale_y_comma() +\n  ggthemes::scale_color_tableau()\n\n\n\n\n\n\n\n\n\n\n\nArată codul\ntabel %>% \n  filter(grupe==\"Total\") %>% \n  mutate_at(vars(import:export), ~100*./PIB) %>% \n  select(-grupe, -PIB) %>% \n  gather(import:export, key=\"Indicator\", value=\"Valoare\") %>% \n  ggplot(aes(x=ani, y=Valoare, group=Indicator)) + \n  geom_line(aes(colour=Indicator), size=1.2) + \n  scale_color_discrete(direction=-1) +\n  labs(title = \"Procentul importurilor/exporturilor din PIB\", \n       x=NULL, y=NULL, \n       caption=\"Sursa: Eurostat nama_10_gdp, INS EXP101F/102F\") +\n  hrbrthemes::scale_y_percent(scale=1) +\n  scale_color_tableau()\n\n\n\n\n\n\n\n\n\nDin prima figură remarcăm o creștere susținută a ambilor indicatori, întreruptă temporar doar de Marea Criză din 2008-2009 și de criza coronavirus. Din a doua figură reiese că atât importurile cât și exporturile sunt undeva în jurul pragului de 35-40 % din PIB. Importurile au crescut însă ușor mai repede, mai ales în perioadele de creștere economică, cu cerere mare, astfel că deficitul comercial s-a adâncit începând cu anul 2015 după o perioadă de aparentă echilibrare.\n\n\nArată codul\ntabel %>% \n  filter(grupe==\"Total\") %>% \n  mutate_at(vars(import:export), ~100*./PIB) %>% \n  select(-grupe, -PIB) %>% \n  mutate(deficit = export - import) %>%\n  ggplot(aes(x=ani, y=deficit)) + \n  geom_col(fill=\"#EEA100\") + \n  labs(title = \"Deficitul comercial\", subtitle=\"ca % din PIB\", \n       x=NULL, y=NULL, \n       caption=\"Sursa: Eurostat nama_10_gdp, INS EXP101F/102F\") +\n  hrbrthemes::scale_y_percent(scale=1)\n\n\n\n\n\n\n\n\n\nSă vedem niște topuri din anul 2022 pentru mărfuri, atât export cât și import. Vom ilustra rezultatele sub forma tabelului interactiv de mai jos.\n\n\nArată codul\ntabel %>% \n  filter(grupe!=\"Total\", ani==2022) %>% \n  arrange(desc(export)) %>% select(-ani, -PIB) %>% \n  rename(Grupe=grupe, Import=import, Export=export) %>%\n  mutate(Deficit = Export - Import) %>%\n  DT::datatable(extensions = 'Buttons', \n                options = list(dom = 'Bfrtip',\n                               buttons = c('copy', 'print', 'csv', 'pdf'))) %>%\n  DT::formatRound(columns=2:4,digits=0) %>%\n  DT::formatStyle(columns=1:4, fontSize: '80%')\n\n\n\n\n\n\n\nAstfel vedem că cel mai exportat bun produs de România sunt părțile și accesoriile de autovehicule, autoturismele, fire, cabluri, tablouri electrice, anvelope, grâu, porumb, iar la polul opus, deficitul cel mai mare se înregistrează pentru uleiuri din petrol, medicamente şi circuite integrate electronice. Toate cele peste 1000 de categorii sunt în acest tabel. Mai observăm că și la importuri pe prima poziție figurează autovehicule, întocmai ca la export. Importăm niște părți, exportăm părțile prelucrate, lucru tipic unei economii specializate în lanțuri cu valoarea adăugată mică. Pe poziția doi importăm medicamente, din nou autoturisme, uleiuri din petrol, telefoane, din nou fire și cabluri, circuite, etc. Analizând variabila Deficit din tabel observăm categoriile de mărfuri la care avem cel mai mare surplus: autoturisme, părți din autovehicule, tablouri, fire, anvelope, porumb, grâu, țigări de foi, tutun, dar și categoriile la care avem cel mai mare deficit: uleiul de petrol, medicamentele, etc. Aceste prime 10 categorii contribuie cu 52 % din deficitul comercial al României ! Doar autoturismele și părțile de autovehicule contribuie cu -26 % la deficitul comercial - adică îl ameliorează cu un sfert.\nPentru a descoperi creșterile disproporționate între grupe calculăm contribuțiile la deficitul comercial total pentru fiecare categorie și pentru fiecare an, alegem doi ani (unul e 2020, celălalt, de exemplu, 2010) și ordonăm grupele după cea mai mare diferență între contribuțiile din acești doi ani. În acest fel aflăm grupele care și-au crescut cel mai mult ponderea în deficit - fie pentru că se exportau și nu se mai exportă sau că erau importate și sunt importate și mai mult. Cea mai dramatică schimbare a avut loc pentru uleiurile din petrol, unde aveam o contribuție negativă de -6.9 % în 2010 și de doar -0.8 % în 2020. Din exportator net important a ajuns aproape echilibrat. La celălalt capăt avem tot uleuri de petrol (brute,de această dată) care și-au scăzut contribuția la deficit de la 26 % la doar 11 %. În acest fel această variație a ameliorat deficitul comercial total. Probabil că una este materie brută pentru cealaltă, care joacă rol de materie finită. Vom ilustra aceste rezultate tot sub forma unui tabel interactiv (cea mai bună formă pentru acest tip de date cu mult prea multe categorii și cu nume prea lungi pentru graficele convenționale).\n\n\nArată codul\ntabel %>% \n    filter(grupe!=\"Total\") %>% \n    arrange(desc(export)) %>% select(-PIB) %>% \n    rename(Grupe=grupe, Import=import, Export=export) %>%\n    mutate(Deficit = Export - Import) %>% \n    arrange(desc(Deficit)) %>% group_by(ani) %>% \n    mutate(ratio = 100*Deficit/sum(Deficit, na.rm=T)) %>% \n    select(Grupe, ratio, ani) %>% filter(ani%in%c(2010, 2020)) %>% \n    spread(ani, ratio) %>% mutate(delta = `2020`-`2010`) %>% \n    arrange(desc(delta)) %>% mutate_at(2:4, ~round(., digits=2)) %>%\n    DT::datatable(extensions = 'Buttons', options = list(dom = 'Bfrtip', \n                  buttons = c('copy', 'print', 'csv', 'pdf'))) %>%\n    DT::formatStyle(columns=1:4, fontSize: '80%')\n\n\n\n\n\n\n\nÎn concluzie, avem cele mai mari schimbări în sensul agravării deficitului comercial în uleiurile din petrol, pacheboturi, nave de croazieră, deșeuri și resturi de fontă, fier sau oțel, telefoane , încălțăminte, etc. Aceste produse în general se exportau și nu se mai exportă la fel de mult în 2020. La polul opus, în sensul ameliorării deficitului comercial avem cele mai mari variații tot în domeniul petrolier (materie brută), tablouri, console, dulapuri, părți de autovehicule, gaz de sondă, autoturisme, tutunul, construcțiile (poduri), cauciuc, etc. De departe cea mai mare amploare o au grupele aparținând petrolului."
  },
  {
    "objectID": "posts/2021-06-03-distribuia-geografic-a-personalului-medical/distribuia-geografic-a-personalului-medical.html",
    "href": "posts/2021-06-03-distribuia-geografic-a-personalului-medical/distribuia-geografic-a-personalului-medical.html",
    "title": "Distribuția geografică a personalului medical",
    "section": "",
    "text": "Câți medici avem în țară ? Unde există deficitul ? Vom folosi datele de la INS, mai precis foaia SAN104B, pentru a răspunde la aceste întrebări.\n\n\nArată codul\nlibrary(tidyverse)\nlibrary(sf)             #pentru harti si date spatiale\nlibrary(TEMPO)          #pentru a extrage datele de pe INS\nlibrary(gt)\nlibrary(ggthemes)\nlibrary(gtExtras)\nlibrary(hrbrthemes)     \n\n#tema graficelor\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 12,\n                                     axis_text_size = 10,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\n\n#descarcam foile SAN104B de pe INS:\n#TEMPO::tempo_bulk(codes=\"SAN104B\", directory = here::here(\"data/post-4\"))\n\nx <- read_csv(here::here(\"data/post-4/SAN104B.csv\")) %>%\n     set_names(c(\"Categorii\", \"Proprietate\", \"Judete\", \n                 \"Localitati\", \"Ani\", \"Numar\", \"Valoare\")) %>% \n     mutate(Ani = parse_number(Ani)) %>%  \n     mutate(Categorii = gsub(\"din total medici.+\", \n                             \"Medici familie\", Categorii)) %>%\n     select(-Numar) %>% \n     filter(!grepl(\"mixta\", Proprietate), Categorii!=\"Farmacisti\")\n\nharta <- sf::read_sf(here::here(\"data\", \"post-2\", \"ro_uat_poligon.geojson\"))\nharta[grepl(\"Bucure.ti\", harta$name), \"natcode\"] <- rep(\"179132\", 6)\n\n     \nx %>% \n  filter(Localitati==\"TOTAL\", Judete==\"TOTAL\") %>% \n  ggplot(aes(x=Ani, y=Valoare, group=Proprietate)) +\n  geom_line(aes(colour=Proprietate), size=1) +\n  facet_wrap(~Categorii, ncol=2, scales='free') +\n  labs(title = \"Personalul medico-sanitar în România\", x=NULL, y=NULL,\n       caption=\"Sursa: INS, SAN104B\") +\n  scale_y_comma() +\n  scale_color_tableau() +\n  theme(legend.position = \"top\")\n\n\n\n\n\n\n\n\n\nObservăm un trend general de creștere pentru personalul sanitar angajat în proprietatea privată pentru toate categoriile. În cazul medicilor de familie, numărul celor angajați în proprietate publică a scăzut accentuat după 2012-2013 ajungând în ultima perioadă la o valoare nesemnificativă. Categoria “Medici” trebuie interpretată ca totalul medicilor, incluzând și pe cei de familie. Aceste date pot fi puse și sub forma unui tabel.\n\n\nArată codul\nx %>% \n  filter(Localitati==\"TOTAL\", Judete==\"TOTAL\") %>% \n  filter(Ani%in%c(2003,2008,2013,2018)) %>% \n  spread(Ani, Valoare) %>% select(-Judete,-Localitati) %>% arrange(desc(Proprietate)) %>%\n  gt::gt(rowname_col = \"Categorii\", groupname_col = \"Proprietate\") %>%\n  gtExtras::gt_theme_538() %>%\n  gt::cols_width(matches(\"[0-9]+\") ~ \"100px\") %>%\n  gt::tab_stubhead(label = \"Categorii\") %>%\n  gt::fmt_number(columns=2:6, sep_mark = \",\", decimals = 0) %>%\n  gt::tab_style(style = cell_text(\"#ad0329\", weight = \"bold\"), \n                locations = cells_row_groups()) %>%\n  gt::tab_style(style=cell_fill(color=\"#daae91\"), \n                locations=cells_row_groups()) %>%\n  gt::tab_style(cell_text(color='black'), \n                locations=cells_column_labels()) %>%\n  gt::tab_options(column_labels.background.color = \"#EEA100\") %>%\n  gt::tab_header(subtitle = \"Sursa: INS, SAN104B\", \n                 title=\"Personal sanitar după forme de proprietate\")\n\n\n\n\n\n\n  \n    \n    \n    \n    \n    \n  \n  \n    \n      Personal sanitar după forme de proprietate\n    \n    \n      Sursa: INS, SAN104B\n    \n    \n      Categorii\n      2003\n      2008\n      2013\n      2018\n    \n  \n  \n    \n      Proprietate publica\n    \n    Medici\n42,538\n42,699\n40,058\n38,064\n    Medici familie\n9,623\n8,825\n6,682\n886\n    Personal sanitar mediu\n109,668\n112,321\n93,679\n94,355\n    Stomatologi\n4,919\n4,067\n2,809\n1,603\n    \n      Proprietate privata\n    \n    Medici\n4,381\n7,568\n14,028\n22,521\n    Medici familie\n1,811\n2,742\n6,054\n11,141\n    Personal sanitar mediu\n10,979\n20,143\n33,181\n50,962\n    Stomatologi\n4,528\n7,834\n11,473\n14,854\n  \n  \n  \n\n\n\n\nSă vizualizăm aceleași trenduri doar pentru medici însă pe medii de rezidență. Observăm că trendul constant pentru personalul medical angajat în proprietatea publică este de fapt unul divergent la nivel rural-urbal: pe când în municipii numărul lor a crescut ușor, în rural și urbanul mic el a scăzut, dând astfel un număr relativ constant la nivel național. În privința celor angajați în privat, trendul este de creștere pentru toate mediile, mai accentuat, desigur, pentru urbanul mare. Lecția acestui grafic: ne izbește procentul mic de medici și personal sanitar în general în mediul rural, proporția fiind și de 5-10 ori mai mică în rural față de urbanul mare.\n\n\nArată codul\nx <- x %>% \n  filter(Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n  mutate(natcode = parse_number(Localitati)) %>%\n  mutate(mediu = str_extract(Localitati, \"ORAS|MUNICIPIUL\") %>% \n                 replace_na(\"COMUNA\")) %>% \n  mutate(natcode=as.character(natcode))\n\n\n\n\nArată codul\nx %>% inner_join(harta) %>%\n  group_by(Categorii, Proprietate, mediu, Ani) %>% \n  summarise(total = 1000*sum(Valoare)/sum(pop2015)) %>% ungroup() %>% \n  filter(Categorii==\"Medici\") %>% \n  ggplot(aes(x=Ani, y=total, group=mediu)) + \n  geom_line(aes(colour=mediu), size=1.2) + \n  facet_wrap(~Proprietate, ncol=2, scales='free') + \n  labs(title = \"Medici la 1000 de locuitori pe medii de rezidență\", \n       x=NULL, y=NULL, colour=\"Mediu\", caption=\"Sursa: INS, SAN104B\") +\n  scale_y_percent(suffix=\"‰\", scale = 1) +\n  scale_color_tableau() +\n  theme(legend.position = \"top\")\n\n\n\n\n\n\n\n\n\nSă repetăm același lucru și pentru medicii de familie și personalul sanitar mediu.\n\n\nArată codul\nx %>% inner_join(harta) %>%\n  group_by(Categorii, Proprietate, mediu, Ani) %>% \n  summarise(total = 1000*sum(Valoare)/sum(pop2015)) %>% ungroup() %>% \n  filter(Categorii==\"Medici familie\") %>% \n  ggplot(aes(x=Ani, y=total, group=mediu)) + \n  geom_line(aes(colour=mediu), size=1.2) + \n  facet_wrap(~Proprietate, ncol=2, scales='free') + \n  labs(title = \"Medici de familie pe medii de rezidență\", \n       x=NULL, y=NULL, colour=\"Mediu\", caption=\"Sursa: INS, SAN104B\") +\n  scale_y_continuous(labels= function(x) paste(x, \"‰\"))+\n  theme(legend.position=\"top\") +\n  scale_color_tableau() \n\n\n\n\n\n\n\n\n\n\n\nArată codul\nx %>% inner_join(harta) %>%\n  group_by(Categorii, Proprietate, mediu, Ani) %>% \n  summarise(total = 1000*sum(Valoare)/sum(pop2015)) %>% ungroup() %>% \n  filter(grepl(\"Personal\", Categorii)) %>% \n  ggplot(aes(x=Ani, y=total, group=mediu)) + \n  geom_line(aes(colour=mediu), size=1.2) + \n  facet_wrap(~Proprietate, ncol=2, scales=\"free\") + \n  labs(title = \"Personal sanitar mediu pe medii de rezidență\", \n       x=NULL, y=NULL, colour=\"Mediu\", caption='Sursa: INS, SAN104B') +\n  scale_y_percent(suffix=\"‰\", scale=1) +\n  theme(legend.position=\"top\") +\n  scale_color_tableau()\n\n\n\n\n\n\n\n\n\nÎn aceste două cazuri lucrurile stau simplu: trendurile sunt aceleași ca la nivel național.\n\n\nArată codul\nx %>% \n  filter(Ani==2019, Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n  group_by(Categorii, Localitati, natcode) %>% \n  summarise(total = sum(Valoare)) %>% \n  ungroup() %>% filter(Categorii==\"Medici\") %>% \n  inner_join(harta) %>% st_as_sf() %>% mutate(total = 1000*total/pop2015) %>%\n  mutate(total = cut_number(total, n=10)) %>%\n  ggplot() + geom_sf(aes(fill=total), size=0.1) + \n  labs(title = \"Număr total medici la 1000 de locuitori\", fill=\"Total\") +\n  guides(guide_colorbar(height=unit(10, \"cm\"))) +\n  theme(plot.title = element_text(size=12), \n        axis.text.x = element_text(size=6), \n        axis.text.y = element_text(size=6),\n        legend.key.height = unit(0.4, \"cm\"),\n        legend.key.width = unit(0.4, \"cm\"),\n        legend.text = element_text(size=6)) +\n  scale_fill_tableau(palette=\"Classic Orange-Blue\", \n                     type='ordered-diverging')\n\n\n\n\n\n\n\n\n\nVedem 288 de localități fără niciun medic, public sau privat. Să le ordonăm după mărimea populației în următorul tabel.\n\n\nArată codul\nx %>% \n    filter(Ani==2019, Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n    group_by(Categorii, Localitati, natcode) %>% \n    summarise(total = sum(Valoare)) %>% \n    ungroup() %>% filter(Categorii==\"Medici\") %>% \n    right_join(harta) %>% filter(is.na(total)) %>% \n    arrange(desc(pop2015)) %>% .[-c(1:6),] %>% select(name, county, pop2015) %>%\n    rename(Populatie = pop2015, Localitate=name, Judet=county) %>%\n    rmarkdown::paged_table()\n\n\n\n\n  \n\n\n\nȘi numărul de localități fără niciun medic după județe:\n\n\nArată codul\nx %>% \n    filter(Ani==2019, Judete!=\"TOTAL\", Localitati!=\"TOTAL\") %>% \n    group_by(Categorii, Localitati, natcode) %>% \n    summarise(total = sum(Valoare)) %>% \n    ungroup() %>% filter(Categorii==\"Medici\") %>% \n    right_join(harta) %>% filter(is.na(total)) %>% \n    arrange(desc(pop2015)) %>% .[-c(1:6),] %>% \n    select(name, county, pop2015) %>% count(county, sort=T) %>% \n    mutate(county=fct_reorder(county, n)) %>% slice(1:15) %>% \n    ggplot(aes(x=county, y=n)) + \n    geom_col(fill=\"#EEA100\") + coord_flip() + \n    labs(title = \"Numărul de localități fără niciun medic\", x=NULL, y=NULL, \n         caption='Sursa: INS, SAN104B')\n\n\n\n\n\n\n\n\n\nVedem că cele mai multe sunt în Hunedoara, Buzău, Vaslui."
  },
  {
    "objectID": "posts/2021-06-02-cum-i-ct-s-a-construit-n-romnia-n-ultimii-30-de-ani/cum-i-ct-s-a-construit-n-romnia-n-ultimii-30-de-ani.html",
    "href": "posts/2021-06-02-cum-i-ct-s-a-construit-n-romnia-n-ultimii-30-de-ani/cum-i-ct-s-a-construit-n-romnia-n-ultimii-30-de-ani.html",
    "title": "Cum și cât s-a construit în România în ultimii 30 de ani ?",
    "section": "",
    "text": "Arată codul\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(hrbrthemes)\nlibrary(TEMPO)\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(ggthemes)\n\n#TEMPO::tempo_bulk(codes=\"LOC103B\", directory = here::here(\"data\", \"post-2\"))\n\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 12,\n                                     axis_text_size = 10,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\n\nx <- read_csv(here::here(\"data/post-2/LOC103B.csv\")) %>%\n     set_names(c(\"forme\", \"judet\", \"loc\", \"ani\", \"indicator\", \"valoare\")) %>%\n     select(-indicator) %>% mutate(ani = parse_number(ani))\n\n\nDatele de la INS prezintă informații cu privire la suprafata locuibilă existentă în țară după localitate, forme de proprietate (public sau privat) și pentru fiecare an. Putem folosi aceste date pentru a înțelege tiparul construcțiilor la noi în țară în ultimii 30 de ani. Să vedem cât s-a construit în total.\n\n\nArată codul\nx %>% \n  filter(forme!=\"Total\", judet==\"TOTAL\", loc==\"TOTAL\") %>% \n  mutate(valoare = valoare/1000000) %>%\n  ggplot(aes(x=ani, y=valoare, group=forme)) + \n  geom_bar(aes(fill=forme), stat=\"identity\") +\n  labs(title = \"Suprafața locuibilă existentă\", x=NULL, y=expr(km^2), \n       caption=\"Sursa: INS, LOC103B\") +\n  ggthemes::scale_fill_tableau()\n\n\n\n\n\n\n\n\n\nObservăm un trend descrescător pentru locuințele construite în regim public, de la 6.35 % din total în anul 1994 la 0.88 % în anul 2019, o scădere a ponderii de aproximativ 7 ori. Salturile din 2001 și 2011 sunt suspecte și trebuie puse pe seama recensămintelor din anii respectivi. Drept urmare, trendul nu este întocmai cel real.\n\n\nArată codul\nx <- x %>% \n  mutate(tip = str_extract(loc, \"ORAS|MUNICIPIUL\") %>% \n               replace_na(., \"COMUNA\")) \n\nx %>% \n  filter(forme!=\"Total\") %>% \n  group_by(tip, ani, forme) %>% \n  summarise(total = sum(valoare)/1000000) %>% \n  ungroup() %>% \n  ggplot(aes(x=ani, y=total, group=tip)) + \n  geom_line(aes(colour=tip), size=1.2) + \n  facet_wrap(~forme, ncol=2, scales='free') + \n  labs(title = \"Suprafața locuibilă existentă după medii de rezidență\",\n       colour=\"Mediu\", caption=\"Sursa: INS, LOC103B\",\n       x=NULL, y=expr(km^2)) + theme(legend.position = \"top\") +\n  scale_y_continuous(labels = scales::number_format(accuracy=1)) +\n  scale_colour_tableau()\n\n\n\n\n\n\n\n\n\nCel mai mult s-a construit în comune, însă acest lucru doar datorită numărului lor ridicat în comparație cu orașele și municipiile. Să vedem același grafic raportat la numărul de locuitori.\n\n\nArată codul\nharta <- sf::read_sf(here::here(\"data\", \"post-2\", \"ro_uat_poligon.geojson\"))\n\nx %>% filter(forme!=\"Total\") %>% \n  mutate(natcode = parse_number(loc) %>% as.character()) %>% \n  inner_join(harta) %>% group_by(natLevName, ani, forme) %>% \n  summarise(total = mean(valoare/pop2015)) %>% ungroup() %>% \n  ggplot(aes(x=ani, y=total, group=natLevName)) + \n  geom_line(aes(colour=natLevName), size=1.2) + \n  facet_wrap(~forme, ncol=3, scales='free') +\n  labs(title = \"Suprafață locuibilă per locuitor\", \n       x=NULL, y=expr(m^2/loc), colour=\"Mediu\", \n       caption=\"Sursa: INS, LOC103B\") +\n  theme(legend.position = \"top\") +\n  scale_colour_tableau()\n\n\n\n\n\n\n\n\n\nComunele rămân mediul în care s-a construit cel mai mult raportat la numărul de locuitori. Observăm aceleași salturi suspecte. Care sunt localitățile cu cea mai mare suprafață locuibilă existentă în regim public în 2019 ? Putem explora acest lucru în tabelul de mai jos.\n\n\nArată codul\nx %>% filter(grepl(\"public\", forme)) %>% \n    mutate(natcode = parse_number(loc) %>% as.character()) %>% \n    inner_join(harta) %>% \n    select(judet, name, natLevName, pop2020, valoare, ani) %>% \n    mutate(suprafata = valoare/pop2020) %>% filter(ani==2021) %>% \n    select(-ani, -pop2020) %>% arrange(desc(suprafata)) %>% \n    slice(1:20) %>% gt::gt() %>% gtExtras::gt_theme_538() %>% \n    fmt_number(columns=4:5, decimals=2) %>%\n    tab_header(title = \"Localităţile cu cea mai mare suprafaţă construită în regim public per locuitor\", subtitle=\"Sursa: INS, LOC103B, 2021\") %>% \n    gt::tab_style(cell_fill(color=\"#EEA100\"), cells_column_labels())\n\n\n\n\n\n\n  \n    \n      Localităţile cu cea mai mare suprafaţă construită în regim public per locuitor\n    \n    \n      Sursa: INS, LOC103B, 2021\n    \n    \n      judet\n      name\n      natLevName\n      valoare\n      suprafata\n    \n  \n  \n    Caras-Severin\nCiudanovița\nComuna\n8,597.00\n13.91\n    Gorj\nMătăsari\nComuna\n41,770.00\n8.45\n    Caras-Severin\nRusca Montană\nComuna\n9,143.00\n4.92\n    Mehedinti\nGogoșu\nComuna\n16,601.00\n3.90\n    Mehedinti\nIzvoru Bârzii\nComuna\n9,410.00\n3.44\n    Hunedoara\nGhelari\nComuna\n6,304.00\n3.15\n    Brasov\nPredeal\nOras\n14,662.00\n3.01\n    Hunedoara\nAninoasa\nOras\n11,408.00\n2.53\n    Suceava\nCrucea\nComuna\n4,298.00\n2.15\n    Caras-Severin\nAnina\nOras\n18,167.00\n2.03\n    Tulcea\nStejaru\nComuna\n2,866.00\n1.89\n    Sibiu\nBruiu\nComuna\n1,608.00\n1.72\n    Ilfov\nCorbeanca\nComuna\n13,761.00\n1.65\n    Timis\nNădrag\nComuna\n3,998.00\n1.41\n    Harghita\nBorsec\nOras\n3,707.00\n1.39\n    Hunedoara\nBănița\nComuna\n1,586.00\n1.31\n    Suceava\nCârlibaba\nComuna\n2,546.00\n1.31\n    Hunedoara\nLupeni\nMunicipiu, altul decat resedinta de judet\n33,205.00\n1.29\n    Harghita\nBălan\nOras\n9,559.00\n1.28\n    Sibiu\nBiertan\nComuna\n3,888.00\n1.27\n  \n  \n  \n\n\n\n\nDestule comune de care nu a auzit nimeni. Dar şi orăşele precum Predealul. Brașovul stă cel mai bine la capitolul suprafață locuită publică totală, nu per cap de locuitor. Însă chiar și în cazul lui declinul este semnificativ: în 1994 avea 912.000 metri pătrați locuiți în regim public față de 250.000 în 2019. Totuși, în ultimii ani a început să crească, întrucât valoarea era și mai scăzută în jurul anului 2010.\n\n\nArată codul\nx %>% filter(grepl(\"BRASOV\", loc), grepl(\"public\", forme)) %>% \n  ggplot(aes(x=ani, y=valoare)) + geom_line(size=1.5, colour=\"#EEA100\") +\n  labs(title = \"Suprafața locuibilă în regim public - orașul Brașov\", \n       x=NULL, y=expr(m^2)) +\n  scale_y_continuous(labels=scales::number_format(big.mark = \",\"))\n\n\n\n\n\n\n\n\n\nÎn concluzie, locuințele publice în România au fost construite din ce în ce mai puțin în ultimii treizeci de ani. Dar înainte de a încheia, să vedem o hartă tematică cu suprafața totală per locuitor pentru anul 2019 clasificate după decile.\n\n\nArată codul\nharta[grepl(\"Bucure.ti\", harta$name), \"natcode\"] <- rep(\"179132\", 6)\n\nx %>% \n  filter(forme==\"Total\", ani==2021) %>% \n  mutate(natcode = parse_number(loc) %>% as.character()) %>% \n  inner_join(harta) %>% \n  mutate(valoare = cut_number(valoare/pop2015, n=10)) %>% sf::st_as_sf() %>% \n  ggplot() + geom_sf(aes(fill=valoare), colour=NA) +\n  scale_fill_tableau(palette = \"Classic Orange-Blue\", type=\"ordered-diverging\") +\n  labs(title = \"Suprafața totală per locuitor\", fill=expr(m^2/loc)) \n\n\n\n\n\n\n\n\n\nNe putem gândi la această hartă ca la o hartă a sărăciei - nordul Moldovei și sudul Dobrogei sunt zonele din prima decilă, cu 6-17 metri per locuitor. Zonele albastre au peste 27 de metri per locuitor, sunt în ultima decilă."
  },
  {
    "objectID": "posts/2021-06-06-geografia-excesului-de-mortalitate/geografia-excesului-de-mortalitate.html",
    "href": "posts/2021-06-06-geografia-excesului-de-mortalitate/geografia-excesului-de-mortalitate.html",
    "title": "Geografia excesului de mortalitate",
    "section": "",
    "text": "Să explorăm datele de la Eurostat, tabelul foarte mare cu date despre numărul de decese săptămânal la nivel de regiune NUTS 3 şi pe categorii de vârstă numit demo_r_mwk3_10. Vom calcula excesul de mortalitate în maniera uzuală, adică prin formula următoare:\n\\[\nExces_{w_i}^{y_j} = \\frac{Decese_{w_i}^{y_j} - \\frac{1}{4} \\sum_{j=2015}^{j=2019} Decese_{w_i}^{y_j}}{\\frac{1}{4} \\sum_{j=2015}^{j=2019} Decese_{w_i}^{y_j}}\n\\]\nUnde \\(Exces_{w_i, y_j}\\) este excesul de mortalitate din săptămâna i, anul j.\n\n\nArată codul\nlibrary(tidyverse)\nlibrary(eurostat)\nlibrary(hrbrthemes)\nlibrary(ggthemes)\nlibrary(sf)\n\ntheme_set(hrbrthemes::theme_ipsum_tw(strip_text_size = 14, \n                                     strip_text_family = \"Roboto\",\n                                     strip_text_face = \"italic\",\n                                     axis_title_size = 12,\n                                     axis_text_size = 10,\n                                     base_family = \"Roboto\",\n                                     plot_title_family = \"Roboto\",\n                                     subtitle_family = \"Roboto\",\n                                     caption_family = \"Roboto\", \n                                     caption_size = 10,\n                                     plot_title_size = 16,\n                                     subtitle_size = 12) +\n  theme(legend.text = element_text(size=10), \n        legend.title = element_text(size=12),\n        legend.key.size = unit(0.5, \"cm\")))  #setam tema graficelor \n\n#x <- get_eurostat(id=\"demo_r_mwk3_10\") \nx <- read_csv(here::here(\"data\", \"post-5\", \"exces.csv\"))\n\nconvert <-function(x){\n  if(nchar(x)==1){\n    paste0(\"0\", x)\n  } else {\n    x\n  }\n}\n\nconvert <- Vectorize(convert, SIMPLIFY = TRUE)\n\n\n\n\nArată codul\nexces_2020 <- x %>% filter(year>2014) %>% filter(week<54, year!=2023) %>%\n  mutate(index = if_else(year%in%c(2015:2019), 0, year)) %>% \n  group_by(age, geo, index, week) %>% \n  summarise(normal = mean(values, na.rm=TRUE)) %>% \n  ungroup() %>% spread(index, normal) %>% drop_na() %>%\n  mutate(across(`2020`:`2022`, ~100*(.-`0`)/`0`))\n\nexces <- exces_2020 %>% \n  filter(week<55) %>% \n  gather(`2020`:`2022`, key='ani', value='exces') %>% \n  mutate(time = paste0(ani, \"-W\",convert(week), \"-3\") %>% \n                ISOweek::ISOweek2date(.))\n\n\nexces %>% \n  filter(age=='TOTAL', grepl(\"^[A-Z]{2}$\",geo)) %>% \n  ggplot(aes(x=time, y=exces, group=geo)) + geom_line(aes(colour=geo),\n                                                      size=1) +\n  gghighlight::gghighlight(geo%in%c(\"RO\",\"BG\",\"HU\",\"PL\",\"CZ\"),\n                           use_direct_label = FALSE,\n                           unhighlighted_params = list(size=0.5),\n                           calculate_per_facet = TRUE) +\n  scale_color_tableau() +\n  labs(title=\"Excesul de mortalitate în Europa\", x=NULL, y=\"Exces (%)\",\n       caption='Sursa: Eurostat, demo_r_mwk_3_10', \n       subtitle=\"Raportat la media 2015-2019\", colour='Ţară') +\n  scale_y_continuous(labels=scales::percent_format(scale=1)) +\n  geom_hline(yintercept=0, linetype=2)\n\n\n\n\n\n\n\n\n\nAm stat destul de rău, fiind destul de sus la mortalitate în perioadele-cheie ale pandemiei. Să vedem mortalităţile pe categorii de vârste.\n\n\nArată codul\nexces_age <- x %>% \n  filter(year>2014) %>% filter(week<54, year!=2023) %>%\n  filter(grepl(\"^[A-Z]{2}$\", geo)) %>% \n  mutate(time = paste0(year, \"-W\", convert(week), \"-3\") %>% ISOweek::ISOweek2date(.)) %>%\n  mutate(month=lubridate::month(time)) %>%\n  mutate(index = if_else(year%in%c(2015:2019), 0, year)) %>% \n  group_by(age, index, month) %>% \n  summarise(normal = mean(values, na.rm=TRUE)) %>% \n  ungroup() %>% spread(index, normal) %>% drop_na() %>%\n  mutate(across(`2020`:`2022`, ~100*(.-`0`)/`0`)) %>%\n  gather(`2020`:`2022`, key='year', value='exces') %>%\n  mutate(time = paste0(year, \"-\", convert(month), \"-01\") %>% as.Date(.))\n\n\nexces_age %>% filter(!grepl(\"TOTAL|UNK|GE80\", age)) %>% \n    ggplot(aes(x=time, y=exces, fill=age)) + geom_col(aes(fill=age)) +\n    scale_y_continuous(labels=scales::percent_format(scale=1)) +\n    scale_fill_tableau() + facet_wrap(~age, ncol=2, scales='free') +\n    labs(title=\"Excesul de mortalitate pe vârste şi luni\", \n         caption='Sursa: Eurostat, r_demo_mwk_3_10', x=NULL, y=\"%\")\n\n\n\n\n\n\n\n\n\nInteresant, cei tineri au avut mortalităţi mai mici în general, abia la intervalul 50-59 ani începe să se balanseze situaţia. Categoria 60-69 de ani are deja mortalitate constant pozitivă în perioadele-cheie ale pandemiei.\nSă vizualizăm o hartă europeană cu excesul mediu de mortalitate după anul 2020 până în prezent.\n\n\nArată codul\nexces_geo <- x %>% \n    filter(year>2014) %>% filter(week<54, year!=2023) %>%\n    mutate(index = if_else(year%in%c(2015:2019), 0, 1)) %>% \n    filter(age==\"TOTAL\") %>%\n    group_by(age, geo, index) %>% \n    summarise(normal = mean(values, na.rm=TRUE)) %>% \n    ungroup() %>% spread(index, normal) %>% drop_na() %>% select(-age) %>%\n    mutate(exces = 100*(`1`-`0`)/`0`)\n\nharta <- eurostat::eurostat_geodata_60_2016 %>% as_tibble() %>%\n         mutate(index = if_else(grepl(\"^DE\", geo) & LEVL_CODE>1, 0, 1)) %>% \n         filter(index!=0) %>%\n         group_by(CNTR_CODE) %>% slice_max(order_by=LEVL_CODE, n=1) %>% ungroup() \n\nexces_geo %>% inner_join(harta) %>% \n  mutate(exces=cut_number(exces, n=10)) %>% st_as_sf() %>%\n  ggplot() + geom_sf(aes(fill=exces), colour=NA) +\n  geom_sf(data = {eurostat::eurostat_geodata_60_2016 %>% filter(LEVL_CODE==0) %>%\n                 st_as_sf() %>% st_cast(., \"MULTILINESTRING\") %>% \n                 as_tibble() %>% st_as_sf()} , \n          colour='black') +\n  scale_fill_tableau(palette = \"Classic Orange-Blue\", \n                     type=\"ordered-diverging\", direction = -1) +\n  scale_x_continuous(limits = c(-11, 30)) +\n  scale_y_continuous(limits = c(35, 70))\n\n\n\n\n\n\n\n\n\nInteresant la această hartă este diviziunea Germaniei de Est de cea de Vest. Istoria contează aparent şi când e vorba de mortalitatea de COVID."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Despre blog",
    "section": "",
    "text": "Acest blog are scopul de a informa opinia publică pe subiecte socio-economice în special axate pe România în contextul ei european. Autorul blogului, Petre Buciu, nu este de profesie economist, ci mai degrabă un amator de economie și statistică în timpul său liber când nu activează ca medic de laborator, profesia sa principală. Sper că veți găsi blogul interesant. Primesc sugestii la adresa de mail buciu_petre2013@yahoo.com. Dacă vă place ce citiți, poate vă gândiți să susțineți financiar blogul aici cu o sumă oricât de mică."
  },
  {
    "objectID": "posts/2021-06-06-o-analiz-a-deficitului-comercial/o-analiz-a-deficitului-comercial.html#contextul-internaţional",
    "href": "posts/2021-06-06-o-analiz-a-deficitului-comercial/o-analiz-a-deficitului-comercial.html#contextul-internaţional",
    "title": "Care este structura deficitului comercial al României ?",
    "section": "Contextul internaţional",
    "text": "Contextul internaţional\nÎn acest capitol analizăm contextul internațional în care se realizează acest deficit comercial, mai precis țările cu care înregistrăm deficite și/sau excedente comerciale. În acest scop vom folosi datele de la INS - foile EXP101B și EXP102E (exporturi și importuri) care detaliază țările de origine pentru importurile și exporturile României. Vom vizualiza la final și rețeaua comerțului internațional în Europa, cu care avem în jur de trei sferturi din relațiile comerciale pentru a înțelege rolul și poziția României în această piață extinsă. Să începem prin a vizualiza cei mai importanți parteneri de export, respectiv import pentru România și balanța comercială după parteneri pentru anul 2020.\n\n\nArată codul\n#tempo_bulk(codes=c(\"EXP102G\"), directory=here::here(\"data/post-6\"))\nexp <- read_csv(here::here(\"data/post-6/EXP101B.csv\")) %>%\n       set_names(c(\"tari\", \"ani\", \"valuta\", \"valoare\")) %>% \n       filter(tari!=\"Total\", grepl(\"EURO\", valuta)) %>% \n       select(-valuta) %>% mutate(ani = parse_number(ani)) %>% \n       rename(export=valoare)\n\nimp <- read_csv(here::here(\"data/post-6/EXP102E.csv\")) %>%\n       set_names(c(\"tari\", \"ani\", \"valuta\", \"valoare\")) %>% \n       filter(tari!=\"Total\", grepl(\"EURO\", valuta)) %>% \n       select(-valuta) %>% mutate(ani = parse_number(ani)) %>% \n       rename(import=valoare)\n\nimp_2 <- read_csv(here::here(\"data/post-6/EXP102G.csv\")) %>%\n         set_names(c(\"tari\", \"ani\", \"valuta\", \"valoare\")) %>% \n         filter(tari!=\"Total\", grepl(\"EURO\", valuta)) %>% \n         select(-valuta) %>% mutate(ani = parse_number(ani)) %>% \n         rename(import=valoare)\n\nimp <- imp %>% bind_rows(imp_2)\ntabel <- inner_join(exp, imp) %>% mutate(delta = export-import) \n\n\n\n\nArată codul\ntabel %>% mutate(export = export/1000) %>%\n  filter(ani==2022) %>% arrange(desc(export)) %>% \n  slice(1:20) %>% mutate(tari=fct_reorder(tari, export)) %>% \n  ggplot(aes(x=tari, y=export)) + \n  geom_col(fill=\"#EEA100\") + coord_flip() + \n  hrbrthemes::scale_y_comma() +\n  labs(title = \"Cei mai importanți parteneri de export\",\n       subtitle=\"Pentru România\",\n       y=\"Milioane EURO\", x=NULL, \n       caption=\"Sursa: INS EXP101B/102E/102G\")\n\n\n\n\n\n\n\n\n\n\n\nArată codul\ntabel %>% mutate(import = import/1000) %>%\n  filter(ani==2022) %>% arrange(desc(import)) %>% \n  slice(1:20) %>% mutate(tari=fct_reorder(tari, import)) %>% \n  ggplot(aes(x=tari, y=import)) + \n  geom_col(fill=\"#EEA100\") + coord_flip() + hrbrthemes::scale_y_comma() +\n  labs(title = \"Cei mai importanți parteneri de import\",\n       subtitle=\"Pentru România\",\n       y=\"Milioane EURO\", x=NULL, caption=\"Sursa: INS EXP101B/102E/102G\")\n\n\n\n\n\n\n\n\n\n\n\nArată codul\ntabel %>% rename(deficit=delta) %>% mutate(deficit=deficit/1000) %>%\n    filter(ani==2022) %>% arrange(desc(abs(deficit))) %>% \n    slice(1:20) %>% mutate(tari=fct_reorder(tari, deficit)) %>% \n    mutate(index = deficit>0) %>%\n    ggplot(aes(x=tari, y=deficit)) + \n    geom_col(aes(fill=index), show.legend = FALSE) + \n    coord_flip() + hrbrthemes::scale_y_comma() +\n    labs(title = \"Balanța comercială după parteneri\", \n         y=\"Milioane EURO\", x=NULL, caption=\"Sursa: INS EXP101B/102E/102G\") +\n    scale_fill_tableau()\n\n\n\n\n\n\n\n\n\nȚara cu care avem cel mai mare deficit comercial este, desigur, China. Și avem cel mai mare excedent comercial cu Regatul Unit. Avem deficite comerciale foarte mari și cu vecinii noștri, Ungaria și Polonia. Să vizualizăm rețeaua exporturilor europene pentru anul 2021, creată pe baza foii ext_tec03 din cadrul Eurostat, din care reiese că poziția României nu e una cu totul marginală. Suntem bine ancorați la hubul principal format din Germania, Franța și Italia. Culorile semnifică importanța nodurilor în rețea (centralitatea), de la albastru (important, central) spre roșu (marginal, periferic). Desigur, centralitatea unui nod în rețea nu este un concept cu totul bine definit, astfel că există diferite măsuri ale centralității, cu diferite rezultate în urma aplicării lor. Dar România rămâne consistent în categoria intermediară (nu galben-portocalie) pentru câteva măsuri importante. Cu cât suma este mai mică, cu atât săgețile sunt mai transparente. Selectăm doar cinci cele mai mari conexiuni pentru fiecare țară întrucât rețeaua și-ar pierde sensul - totul ar fi conectat cu totul.\n\n\nArată codul\ntec <- get_eurostat(id=\"ext_tec03\") %>%  \n       label_eurostat() %>%\n       filter(grepl(\"Thousand\", unit)) %>% select(-unit)\n\nnetwork <- tec %>%\n            filter(grepl(\"Total - all NACE\", nace_r2), \n                   grepl(\"2020\", time), stk_flow==\"Exports\") %>%\n            select(geo, partner, values) %>%\n            rename(from = geo,\n                   to = partner) %>%\n            mutate(from = gsub(\"Germany.*\", \"Germany\", from),\n                   to = gsub(\"Germany.*\", \"Germany\", to)) %>%\n            filter(!from%in%c(\"Cyprus\", \"Luxembourg\", \"Malta\", \"Ireland\")) %>%\n            filter(to%in%from) \n\nretea_prel <- network %>% group_by(from) %>%\n              arrange(desc(values)) %>% top_n(5) %>%\n              ungroup() %>% tidygraph::as_tbl_graph()            \n  \nnetwork_plot <- retea_prel %>% \n                  activate(nodes) %>%\n                  mutate(centralitatea1 = as.factor(round(centrality_eigen(),1)), centralitate = centrality_eigen()) %>%\n                  ggraph(layout=\"fr\") + \n                  geom_edge_fan(aes(edge_alpha=values), \n                                arrow = arrow(length = unit(2, 'mm')), \n                  start_cap = circle(10, 'mm'),\n                  end_cap = circle(10, 'mm'), show.legend=FALSE) + \n                  geom_node_point(aes(colour=centralitatea1, \n                                      size=centralitate), \n                                  show.legend = F) + \n                  scale_color_tableau(type = \"ordered-sequential\", \n                                      palette = \"Green-Gold\") +\n                  geom_node_text(aes(label = name), size=2.8) + \n                  theme_graph() +\n                  theme(legend.key.height = unit(0.4, \"cm\"),\n                        legend.key.width = unit(0.4, \"cm\")) +\n                  scale_size_continuous(range=c(8, 24))\nnetwork_plot\n\n\n\n\n\n\n\n\n\nSă inspectăm și rețeaua deficitelor comerciale între țări.\n\n\nArată codul\n#deficite cu partenerii\ndeficite_network <- tec %>%\n            filter(grepl(\"Total - all NACE\", nace_r2), \n                   grepl(\"2020\", time)) %>%\n            spread(stk_flow, values) %>%\n            mutate(deficit = Exports - Imports) %>%\n            select(geo, partner, deficit) %>%\n            rename(from = geo,\n                   to = partner) %>%\n            mutate(from = gsub(\"Germany.*\", \"Germany\", from),\n                   to = gsub(\"Germany.*\", \"Germany\", to)) %>%\n            filter(!from%in%c(\"Cyprus\", \"Luxembourg\", \"Malta\", \"Ireland\")) %>%\n            filter(to%in%from)\n\ndeficite_prel <- deficite_network %>%\n                group_by(from) %>%\n                     arrange(((deficit))) %>%\n                     filter(row_number() <=5) %>%\n                     ungroup() %>%\n                as_tbl_graph()            \n  \ndeficite_net_plot <- deficite_prel %>% \n                  activate(nodes) %>%\n                  mutate(centralitatea = as.factor(round(centrality_eigen(),1)), centralitate = centrality_eigen()) %>%\n                  ggraph(layout=\"kk\") + \n                  geom_edge_fan(aes(edge_alpha=abs(deficit)), \n                                arrow = arrow(length = unit(3, 'mm')), \n                  start_cap = circle(10, 'mm'),\n                  end_cap = circle(10, 'mm'), show.legend=FALSE) + \n                  geom_node_point(aes(colour=centralitatea, \n                                      size=centralitate), show.legend = F) + \n                  scale_color_tableau(type=\"ordered-sequential\", \n                                      palette = \"Green-Gold\") +\n                  geom_node_text(aes(label = name), size=2.8) + \n                  theme_graph() +\n                  theme(legend.key.size=unit(0.4, \"cm\")) +\n                  scale_size_continuous(range=c(8, 24))\ndeficite_net_plot\n\n\n\n\n\n\n\n\n\nGraficul acesta trebuie interpretat în felul următor: direcția săgeții arată țara cu care ai deficit: România cu Germania, etc."
  },
  {
    "objectID": "posts/2021-06-06-o-analiz-a-deficitului-comercial/o-analiz-a-deficitului-comercial.html#caracteristicile-importatorilor-şi-exportatorilor-români",
    "href": "posts/2021-06-06-o-analiz-a-deficitului-comercial/o-analiz-a-deficitului-comercial.html#caracteristicile-importatorilor-şi-exportatorilor-români",
    "title": "Care este structura deficitului comercial al României ?",
    "section": "Caracteristicile importatorilor şi exportatorilor români",
    "text": "Caracteristicile importatorilor şi exportatorilor români\nÎn cele din urmă nicio analiză de acest fel nu poate fi completă fără o privire asupra firmelor implicate în comerțul internațional. Cât sunt ele de mari, ce capital au ? În acest sens avem datele de la INS, foile EXP101O și EXP102O pentru a investiga mărimea firmelor și EXP101R și EXP102R pentru tipul capitalului: românesc sau străin. În acest fel putem afla mai multe despre firmele care alcătuiesc prin activitatea lor economică acest deficit comercial. Să începem cu analiza după clasele de mărime ale firmelor exportatoare/importatoare.\n\n\nArată codul\n#TEMPO::tempo_bulk(codes=c(\"EXP101O\", \"EXP102O\", \"EXP101R\", \"EXP102R\"),\n#                  directory=here::here(\"data/post-6\"))\nfmimp <- read_csv(here::here(\"data/post-6/EXP102O.csv\"))\nfmexp <- read_csv(here::here(\"data/post-6/EXP101O.csv\"))\nfmimp %>% \n  set_names(c(\"clase\", \"ani\", \"unitate\", \"valoare\")) %>% \n  filter(clase!=\"Total\") %>% mutate(ani = parse_number(ani)) %>% \n  mutate(ani = paste0(ani, \"-01-01\") %>% as.Date()) %>%\n  ggplot(aes(x=ani, y=valoare, group=clase)) + \n  geom_line(aes(colour=clase), size=1.2) + \n  hrbrthemes::scale_y_comma() + \n  labs(title = \"Caracteristicile de mărime ale firmelor importatoare\", \n       x=NULL, y=NULL, caption=\"Sursa: INS EXP102O/EXP101O\") +\n  facet_wrap(~unitate, ncol=2, scales=\"free\") + \n  theme(legend.position=\"top\") +\n  scale_color_tableau()\n\n\n\n\n\n\n\n\n\nObservăm că deși majoritatea firmelor importatoare sunt cele mici (care sunt majoritare și în economia românească în general), la nivel de sumă majoritatea importurilor sunt făcute de firmele foarte puține numeric, dar cu peste 250 de salariați și, în mai mică măsură, cu 10-249 de salariați.\n\n\nArată codul\nfmexp %>% \n  set_names(c(\"clase\", \"ani\", \"unitate\", \"valoare\")) %>% \n  filter(clase!=\"Total\") %>% mutate(ani = parse_number(ani)) %>% \n  mutate(ani = paste0(ani, \"-01-01\") %>% as.Date()) %>%\n  ggplot(aes(x=ani, y=valoare, group=clase)) + \n  geom_line(aes(colour=clase), size=1.2) + \n  hrbrthemes::scale_y_comma() + \n  labs(title = \"Caracteristicile de mărime ale firmelor exportatoare\", \n       x=NULL, y=NULL, caption=\"Sursa: INS EXP101O/102O\") +\n  facet_wrap(~unitate, ncol=2, scales=\"free\") + \n  theme(legend.position=\"top\") +\n  scale_color_tableau()\n\n\n\n\n\n\n\n\n\nÎn privința firmelor exportatoare situația este similară, cu excepția faptului că firmele cu 10-249 salariați exportă în număr mai mare decât cele cu 0-4 salariați. Firmele mici sunt importatori la noi - peste 50.000 de firme importă, dar sub 10.000 exportă. În privința sumelor, fenomenul de concentrare este și mai accentuat, firmele cu peste 250 de salariați exportă mult mai mult decât celelalte. Să vedem și celalaltă caracteristică despre care avem date, naționalitatea capitalului.\n\n\nArată codul\n#tempo_bulk(codes=c(\"EXP102R\", \"EXP101R\"), directory=here::here(\"data/post-6\"))\nfcimp <- read_csv(here::here(\"data/post-6/EXP102R.csv\"))\nfcexp <- read_csv(here::here(\"data/post-6/EXP101R.csv\"))\n\nfcimp %>% \n  set_names(c(\"capital\", \"ani\", \"unitate\", \"valoare\")) %>% \n  filter(capital!=\"Total\") %>% mutate(ani = parse_number(ani)) %>% \n  mutate(ani = paste0(ani, \"-01-01\") %>% as.Date()) %>%\n  ggplot(aes(x=ani, y=valoare, group=capital)) + \n  geom_line(aes(colour=capital), size=1.2) + \n  hrbrthemes::scale_y_comma() + \n  labs(title = \"Caracteristicile de capital ale firmelor importatoare\", \n       x=NULL, y=NULL, caption=\"Sursa: INS EXP101R/102R\") +\n  facet_wrap(~unitate, ncol=2, scales=\"free\") + \n  theme(legend.position=\"top\") +\n  scale_color_tableau()\n\n\n\n\n\n\n\n\n\nObservăm că capitalul integral străin importă covârșitor în sumă, deși aceste firme sunt în număr foarte mic relativ la cele cu capital românesc.\n\n\nArată codul\nfcexp %>% \n  set_names(c(\"capital\", \"ani\", \"unitate\", \"valoare\")) %>% \n  filter(capital!=\"Total\") %>% mutate(ani = parse_number(ani)) %>% \n  mutate(ani = paste0(ani, \"-01-01\") %>% as.Date()) %>%\n  ggplot(aes(x=ani, y=valoare, group=capital)) + \n  geom_line(aes(colour=capital), size=1.2) + \n  hrbrthemes::scale_y_comma() + \n  labs(title = \"Caracteristicile de capital ale firmelor exportatoare\", \n       x=NULL, y=NULL, caption=\"Sursa: INS 101R/102R\") +\n  facet_wrap(~unitate, ncol=2, scales=\"free\") + \n  theme(legend.position=\"top\") +\n  scale_color_tableau()\n\n\n\n\n\n\n\n\n\nSituația este similară și pentru exportatori. Concluzia pe care o putem trage din aceste observații este că firmele românești sunt jucători relativ modești pe piața internațională, un procent mic exportă, foarte multe importă, dar grosul importurilor este făcut de capital străin mare, însă la fel stă treaba și pentru grosul exporturilor. S-ar putea face mai multe lucruri pentru a încuraja firmele românești să participe la export !"
  }
]